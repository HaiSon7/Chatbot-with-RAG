# Chatbot TÆ° Váº¥n Äiá»‡n Thoáº¡i - HoÃ ng HÃ  Mobile ğŸ“±

Chatbot tÆ° váº¥n thÃ´ng minh sá»­ dá»¥ng RAG (Retrieval Augmented Generation) Ä‘á»ƒ tÆ° váº¥n sáº£n pháº©m Ä‘iá»‡n thoáº¡i, tÃ­ch há»£p vá»›i cÆ¡ sá»Ÿ dá»¯ liá»‡u MongoDB vÃ  mÃ´ hÃ¬nh ngÃ´n ngá»¯ Gemma.

## ğŸ“¸ Demo Screenshots

### Giao diá»‡n chÃ­nh
![Main Interface](images/Screenshot 2024-12-08 112639.png)
*Giao diá»‡n chÃ­nh cá»§a chatbot vá»›i sidebar thÃ´ng tin vÃ  khung chat*

### TÆ° váº¥n sáº£n pháº©m
![Product Consultation](images/Screenshot 2024-12-08 112155.png)
*Chatbot Ä‘ang tÆ° váº¥n chi tiáº¿t vá» má»™t máº«u Ä‘iá»‡n thoáº¡i*

### So sÃ¡nh sáº£n pháº©m
![Product Comparison](images/Screenshot 2024-12-08 112421.png)
![Product Comparison](images/Screenshot 2024-12-08 112523.png)
*So sÃ¡nh thÃ´ng sá»‘ ká»¹ thuáº­t giá»¯a cÃ¡c máº«u Ä‘iá»‡n thoáº¡i*

### TrÃ² chuyá»‡n thÃ´ng thÆ°á»ng
![Chitchat](images/Screenshot 2024-12-08 111223.png)
*Chatbot cÃ³ thá»ƒ trÃ² chuyá»‡n tá»± nhiÃªn vá»›i ngÆ°á»i dÃ¹ng*

### TÃ­nh nÄƒng tÃ¬m kiáº¿m
### Sau khi nháº­n yÃªu cáº§u tá»« ngÆ°á»i dÃ¹ng há»‡ thá»‘ng sáº½ reflection vÃ  tÄƒng cÆ°á»ng prompt nhÆ° sau vÃ  truyá»n vÃ o model :
Query_user: hÃ£y nÃ³i vá» samsung galaxy z fold4 - 256gb - chÃ­nh hÃ£ng
Context: Báº¡n cÃ³ thá»ƒ cho mÃ¬nh biáº¿t thÃªm chi tiáº¿t vá» Samsung Galaxy Z Fold4 vá»›i dung lÆ°á»£ng lÆ°u trá»¯ 256GB, Ä‘áº·c biá»‡t lÃ  vá» n
há»¯ng Æ°u Ä‘iá»ƒm vÃ  nhÆ°á»£c Ä‘iá»ƒm cá»§a phiÃªn báº£n nÃ y? CÃ²n ná»¯a, báº¡n cÃ³ thá»ƒ cung cáº¥p thÃ´ng tin vá» má»©c giÃ¡, nÆ¡i bÃ¡n chÃ­nh hÃ£ng vÃ  cÃ¡c mÃ u sáº¯c khÃ¡c cho phiÃªn báº£n nÃ y khÃ´ng?
ThÃ´ng tin sáº£n pháº©m:
 1) TÃªn: samsung galaxy z fold4 - 256gb - chÃ­nh hÃ£ng, GiÃ¡: nan, ThÃ´ng sá»‘: CÃ´ng nghá»‡ mÃ n hÃ¬nh:
Dynamic AMOLED 2X<br> Äá»™ phÃ¢n giáº£i:
ChÃ­nh: QXGA+ (2176 x 1812 Pixels) & Phá»¥: HD+ (2316 x 904 Pixels), ChÃ­nh 50 MP & Phá»¥ 12 MP, 10 MP, 10 MP & 4 MP<br> KÃ­ch thÆ°á»›c mÃ n hÃ¬nh: 
ChÃ­nh 7.6 inch & 6.2 inch<br> Há»‡ Ä‘iá»u hÃ nh:
Android 12<br> Vi xá»­ lÃ½:
Snapdragon 8+ Gen 1 8 nhÃ¢n<br> Bá»™ nhá»› trong:
256 GB<br> RAM:
12GB<br> Máº¡ng di Ä‘á»™ng:
Há»— trá»£ 5G<br> Sá»‘ khe SIM:
1 Nano SIM & 1 eSIM<br> Dung lÆ°á»£ng pin:
4400 mAh<br>, Æ¯u Ä‘Ã£i: nan, MÃ u sáº¯c: []
 2) TÃªn: samsung galaxy z fold4 - 512gb -chÃ­nh hÃ£ng, GiÃ¡: nan, ThÃ´ng sá»‘: CÃ´ng nghá»‡ mÃ n hÃ¬nh:
Dynamic AMOLED 2X<br> Äá»™ phÃ¢n giáº£i:
ChÃ­nh: QXGA+ (2176 x 1812 Pixels) & Phá»¥: HD+ (2316 x 904 Pixels), ChÃ­nh 50 MP & Phá»¥ 12 MP, 10 MP, 10 MP & 4 MP<br> KÃ­ch thÆ°á»›c mÃ n hÃ¬nh: 
ChÃ­nh 7.6 inch & 6.2 inch<br> Há»‡ Ä‘iá»u hÃ nh:
Android 12<br> Vi xá»­ lÃ½:
Snapdragon 8+ Gen 1 8 nhÃ¢n<br> Bá»™ nhá»› trong:
512GB<br> RAM:
12GB<br> Máº¡ng di Ä‘á»™ng:
Há»— trá»£ 5G<br> Sá»‘ khe SIM:
1 Nano SIM & 1 eSIM<br> Dung lÆ°á»£ng pin:
4400 mAh<br>, Æ¯u Ä‘Ã£i: nan, MÃ u sáº¯c: []
                YÃªu cáº§u: HÃ£y tráº£ lá»i cÃ¢u há»i cá»§a ngÆ°á»i dÃ¹ng dá»±a trÃªn context vÃ 
                thÃ´ng tin sáº£n pháº©m Ä‘Æ°á»£c cung cáº¥p. Náº¿u khÃ´ng cÃ³ sáº£n pháº©m cá»¥ thá»ƒ Ä‘Æ°á»£c yÃªu cáº§u,
                hÃ£y gá»£i Ã½ cÃ¡c sáº£n pháº©m phÃ¹ há»£p dá»±a trÃªn nhu cáº§u Ä‘Æ°á»£c thá»ƒ hiá»‡n trong context.

## ğŸŒŸ TÃ­nh nÄƒng chÃ­nh

- TÆ° váº¥n sáº£n pháº©m Ä‘iá»‡n thoáº¡i dá»±a trÃªn dá»¯ liá»‡u thá»±c
- PhÃ¢n loáº¡i cÃ¢u há»i thÃ´ng minh (sáº£n pháº©m/trÃ² chuyá»‡n)
- TÃ¬m kiáº¿m vector vá»›i MongoDB
- Giao diá»‡n ngÆ°á»i dÃ¹ng thÃ¢n thiá»‡n vá»›i Streamlit
- Xá»­ lÃ½ ngá»¯ cáº£nh thÃ´ng minh vá»›i reflection

## ğŸ›  CÃ´ng nghá»‡ sá»­ dá»¥ng

- **Python 3.8+**
- **Streamlit**: UI Framework
- **MongoDB**: Vector Database
- **LangChain**: Framework xá»­ lÃ½ LLM
- **Gemma**: MÃ´ hÃ¬nh ngÃ´n ngá»¯
- **Sentence Transformers**: MÃ´ hÃ¬nh embedding

## ğŸ“‹ YÃªu cáº§u há»‡ thá»‘ng

- Python 3.8 trá»Ÿ lÃªn
- MongoDB 7.0+ vá»›i Atlas Vector Search
- GPU (khuyáº¿n nghá»‹) hoáº·c CPU máº¡nh
- Tá»‘i thiá»ƒu 8GB RAM

## ğŸš€ HÆ°á»›ng dáº«n cÃ i Ä‘áº·t

1. Clone repository:
```bash
git clone https://github.com/HaiSon7/Chatbot-with-RAG
```

2. Táº¡o mÃ´i trÆ°á»ng áº£o:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
.\venv\Scripts\activate   # Windows
```

3. CÃ i Ä‘áº·t dependencies:
```bash
pip install -r requirements.txt
```

4. Cáº¥u hÃ¬nh MongoDB:
- Táº¡o tÃ i khoáº£n MongoDB Atlas
- Táº¡o database vÃ  collection
- Táº¡o vector index cho collection
- Cáº­p nháº­t connection string trong `.env`

5. Cáº¥u hÃ¬nh biáº¿n mÃ´i trÆ°á»ng:
```bash
cp .env.example .env
# Cáº­p nháº­t cÃ¡c biáº¿n trong .env
```

## ğŸ’» Cáº¥u trÃºc dá»± Ã¡n

```
chatbot-hoanghamobile/
â”œâ”€â”€ embeddings/           # Xá»­ lÃ½ embedding
â”œâ”€â”€ rag/                  # Logic RAG
â”œâ”€â”€ reflection/          # Xá»­ lÃ½ ngá»¯ cáº£nh
â”œâ”€â”€ semantic_router/     # PhÃ¢n loáº¡i cÃ¢u há»i
â”œâ”€â”€ main.py              # Entry point
â”œâ”€â”€ requirements.txt     # Dependencies
â””â”€â”€ README.md
```

## ğŸ¯ Sá»­ dá»¥ng

1. Khá»Ÿi Ä‘á»™ng á»©ng dá»¥ng:
```bash
streamlit run main.py
```

2. Truy cáº­p á»©ng dá»¥ng táº¡i:
```
http://localhost:8501
```

## ğŸ“ API Reference

### RAG Class
```python
rag = RAG(embedding, mongodbUri, dbName, dbCollection)
rag.vector_search(query, limit=2)
rag.enhance_prompt(query, limit=2)
```

### SemanticRouter Class
```python
router = SemanticRouter(embedding)
router.guide(query)  # Returns: 0 (product) or 1 (chitchat)
```

### Reflection Class
```python
reflection = Reflection(llm)
reflection.summarize_context(history, query)
reflection(history, query)
```

## ğŸ”§ Cáº¥u hÃ¬nh

CÃ¡c thÃ´ng sá»‘ cÃ³ thá»ƒ Ä‘iá»u chá»‰nh trong `config.py`:

```python
MODEL_NAME = "gemma2:2b"
MODEL_TEMP = 0.5
EMBEDDING_MODEL = 'keepitreal/vietnamese-sbert'
DB_NAME = "products"
DB_COLLECTION = "products"
```

## ğŸ¤ ÄÃ³ng gÃ³p

1. Fork repository
2. Táº¡o branch má»›i (`git checkout -b feature/AmazingFeature`)
3. Commit thay Ä‘á»•i (`git commit -m 'Add some AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Táº¡o Pull Request

## ğŸ“„ License

MIT License - xem [LICENSE](LICENSE) Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t

## ğŸ‘¥ TÃ¡c giáº£

- **Your Name** - *Initial work* - [YourGithub](https://github.com/yourusername)

## ğŸ™ Acknowledgments

- Gemma team cho mÃ´ hÃ¬nh ngÃ´n ngá»¯
- Sentence Transformers cho mÃ´ hÃ¬nh embedding
- MongoDB team cho Atlas Vector Search
- Streamlit team cho framework UI

## ğŸ“Š Roadmap

- [ ] ThÃªm support nhiá»u ngÃ´n ngá»¯
- [ ] Cáº£i thiá»‡n Ä‘á»™ chÃ­nh xÃ¡c cá»§a vector search
- [ ] Tá»‘i Æ°u hÃ³a performance
- [ ] ThÃªm tÃ­nh nÄƒng analytics
- [ ] TÃ­ch há»£p vá»›i cÃ¡c nguá»“n dá»¯ liá»‡u khÃ¡c

## â“ FAQ

**Q: LÃ m sao Ä‘á»ƒ thÃªm sáº£n pháº©m má»›i?**
A: ThÃªm dá»¯ liá»‡u vÃ o MongoDB collection vÃ  cháº¡y script cáº­p nháº­t embedding.

**Q: MÃ´ hÃ¬nh cÃ³ hoáº¡t Ä‘á»™ng offline khÃ´ng?**
A: CÃ³, nhÆ°ng cáº§n táº£i vá» mÃ´ hÃ¬nh Gemma vÃ  cáº¥u hÃ¬nh phÃ¹ há»£p.

**Q: LÃ m sao Ä‘á»ƒ thay Ä‘á»•i mÃ´ hÃ¬nh ngÃ´n ngá»¯?**
A: Cáº­p nháº­t `MODEL_NAME` trong config vÃ  Ä‘áº£m báº£o mÃ´ hÃ¬nh tÆ°Æ¡ng thÃ­ch vá»›i LangChain.

## ğŸ”— Links há»¯u Ã­ch

- [MongoDB Atlas Documentation](https://docs.atlas.mongodb.com/)
- [Streamlit Documentation](https://docs.streamlit.io/)
- [LangChain Documentation](https://python.langchain.com/docs/)
- [Sentence Transformers Documentation](https://www.sbert.net/)